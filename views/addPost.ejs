<%- include('partials/header.ejs') %>

    <div class="container ">

        <div class="py-5 text-center"> <img class="d-block mx-auto mb-4" src="/images/icons/lotus.png" alt="" width="80"
                height="80">
            <h1 class="h2">Every day tells a story.</h1>
            <p class="lead">The days may pass, but the memories stay.
                Capture yours on Doppio and honor every step you've taken.</p>
        </div>
        <div class="row g-5">
            <div class="col-md-7 col-lg-8 mx-auto">

                <h4 class="mb-3 text-center">
                    <%= isEdit ? "Edit Post" : "Create New Post" %>
                </h4>

                <form action="<%= isEdit ? '/updatepost' : '/post' %>" method="POST" enctype="multipart/form-data">

                    <div class="row g-3">
                        <!-- Description Field -->
                        <div class="col-12 ">
                            <label for="floatingTextarea" class="form-label">Description</label>
                            <div class="form-floating ">
                                <textarea name="description" class="form-control" placeholder="Leave a comment here"
                                    id="floatingTextarea" style="height: 100px;"><%=description%></textarea>
                            </div>
                        </div>

                        <div class="col-12 d-flex justify-content-center mt-3">
                            <div id="drop-area" class="file-upload-wrapper text-center border rounded p-5 w-100"
                                style="cursor: pointer; border-style: dashed; max-width: 100%; background-color: #f8f9fa;">
                                <% if (isEdit) { %>
                                    <input type="hidden" name="id" value="<%= id %>">
                                    <input type="hidden" name="oldImage" value="<%= image %>">
                                    <p class="file-upload-default-message mb-1">

                                        <strong>Image UnEditble</strong>

                                    </p>
                                    <p id="file-name" class="text-muted mt-2 small">
                                        <%= image %>
                                    </p>
                                    <% } else { %>
                                        <input type="file" name="image" id="fileElem" class="d-none" accept="image/*">

                                        <img src="/images/icons/image.png" alt="Upload" class="mb-2"
                                            style="width: 64px; height: 64px;">

                                        <p class="file-upload-default-message mb-1">
                                            Drag & drop an image here<br>
                                            <strong>or click to select</strong>

                                        </p>
                                        <p id="file-name" class="text-muted mt-2 small"></p>
                                        <% } %>

                            </div>
                        </div>


                    </div>

                    <hr class="my-4">

                    <!-- Submit Button -->
                    <button class="w-100 btn btn-primary btn-lg shadow custom-post-btn" type="submit">
                        <%= isEdit ? "Update" : "Post" %>
                    </button>
                </form>


            </div>
        </div>

    </div>


    <%- include('partials/footer.ejs') %>